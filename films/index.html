<!DOCTYPE html>
<meta charset="utf-8">
<style>
body {
  font: 10px sans-serif;
  shape-rendering: crispEdges;
}
rect {
  stroke: #000;
}
</style>
<body>
</body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>
var width = 500;
var height = 500;
var x = "";
var y = "";
var color = "";
var boxSize = 10;

d3.csv("NolanFilmography.csv", function(d) {
	return {
		title: d.Title,
		year: +d.Year,
		runningTime: +d["Domestic Running Time"],
		boxOffice: +d["Box Office"],
		rottenTomatoesScore: +d["Rotten Tomatoes Score"]
	};
}, function(error, rows) {
	console.log(rows);

	x = d3.scale.linear()
		.domain([
			0,
			d3.max(rows, function(d) {
				return d.runningTime;
			})
		])
		.range([0, width]);
	y = d3.scale.linear()
		.domain([
			d3.max(rows, function(d) {
				return d.boxOffice;
			}),
			0
		])
		.range([0, height - boxSize]);
    
    color = d3.scale.linear().domain([.0,1]).range(["orange","blue"]);

	var svg = d3.select("body").append("svg")
    	.attr("width", width + boxSize + 2)
    	.attr("height", height + boxSize + 2)
    	.attr("class", "chart");

	var items = svg.selectAll(".item")
	    .data(rows)
	  .enter().append("rect")
	  	.attr("x", function(d,i) {
	  		return x(d.runningTime);
	  	})
	  	.attr("y", function(d,i) {
	  		return y(d.boxOffice);
	  	})
	  	.attr("style", function(d,i) {
	  		return "fill:" + color(d.rottenTomatoesScore);
	  	})
	    .attr("width", boxSize)
	    .attr("height", boxSize)
	    .attr("class","item");

	items.append("title")
    	.text(function(d) {
    		return d.title + " "  + d.runningTime + " " + d.boxOffice + " " + d.rottenTomatoesScore;
    	});
	    /*
	    .append("text")
    		//.attr("transform", "translate(60,12)")
    		.style("text-anchor", "middle")
    		.text(function(d) { return d.title; })
    	*/

    /*
	var rect = svg.selectAll(".day")
	    .data(rows)
	  .enter().append("rect")
	    .attr("class", "day")
	    .attr("width", 10)
	    .attr("height", 10)
	    .attr("x", function(d) { return Math.random() * 100; })
	    .attr("y", function(d) { return Math.random() * 100; });
	*/

	/*
	rect.filter(function(d) { return d in data; })
	  .attr("class", function(d) { return "day " + color(data[d]); })
	.select("title")
	  .text(function(d) { return d + ": " + percent(data[d]); });
	*/
});
</script>